<!DOCTYPE html>
<html>
<head>
    <title>Canvas Drawing</title>
    <style>
        canvas {
            border: 2px solid black;
            height:100%;
            
        }
        #tools {
            display: flex;
        }
        #colors {
            display: flex;
            margin-left: 10px;
        }
        .color {
            width: 20px;
            height: 20px;
            cursor: pointer;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <div id="tools">
        <button id="pen">Pen</button>
        <button id="eraser">Eraser</button>
        <div id="colors">
            <div class="color" style="background-color: red;"></div>
            <div class="color" style="background-color: green;"></div>
            <div class="color" style="background-color: blue;"></div>
            <div class="color" style="background-color: yellow;"></div>
            <div class="color" style="background-color: black;"></div>
        </div>
    </div>
    <canvas id="drawingCanvas" width="1400" height="1000"></canvas>

    <script>
        const canvas = document.getElementById("drawingCanvas");
        const context = canvas.getContext("2d");
        const penButton = document.getElementById("pen");
        const eraserButton = document.getElementById("eraser");
        const colors = document.querySelectorAll(".color");

        let drawing = false;
        let erasing = false;
        let currentColor = "black";
        let lineWidth = 1;

        canvas.addEventListener("mousedown", startDrawing);
        canvas.addEventListener("mousemove", draw);
        canvas.addEventListener("mouseup", stopDrawing);
        canvas.addEventListener("mouseleave", stopDrawing);

        canvas.addEventListener("touchstart", startDrawing);
        canvas.addEventListener("touchmove", draw);
        canvas.addEventListener("touchend", stopDrawing);

        penButton.addEventListener("click", () => {
            erasing = false;
        });

        eraserButton.addEventListener("click", () => {
            erasing = true;
        });

        colors.forEach((color) => {
            color.addEventListener("click", () => {
                currentColor = color.style.backgroundColor;
            });
        });

        function startDrawing(e) {
            e.preventDefault();
            drawing = true;
            context.beginPath();
            if (e.type === "touchstart") {
                const touch = e.touches[0];
                context.moveTo(
                    touch.clientX - canvas.getBoundingClientRect().left,
                    touch.clientY - canvas.getBoundingClientRect().top
                );
            } else {
                context.moveTo(
                    e.clientX - canvas.getBoundingClientRect().left,
                    e.clientY - canvas.getBoundingClientRect().top
                );
            }
        }

        function draw(e) {
            if (!drawing) return;
            e.preventDefault();
            if (erasing) {
                context.globalCompositeOperation = "destination-out";
                context.strokeStyle = "rgba(255,255,255,1)";
                context.lineWidth = lineWidth + 15; // Make the eraser slightly larger
            } else {
                context.globalCompositeOperation = "source-over";
                context.strokeStyle = currentColor;
                context.lineWidth = lineWidth;
            }

            if (e.type === "touchmove") {
                const touch = e.touches[0];
                context.lineTo(
                    touch.clientX - canvas.getBoundingClientRect().left,
                    touch.clientY - canvas.getBoundingClientRect().top
                );
            } else {
                context.lineTo(
                    e.clientX - canvas.getBoundingClientRect().left,
                    e.clientY - canvas.getBoundingClientRect().top
                );
            }
            context.stroke();
        }

        function stopDrawing() {
            drawing = false;
            context.closePath();
        }
    </script>
</body>
</html>
